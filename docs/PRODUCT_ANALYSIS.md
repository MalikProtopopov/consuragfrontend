# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–¥—É–∫—Ç–∞ AI Avatar Platform

**–í–µ—Ä—Å–∏—è –∞–Ω–∞–ª–∏–∑–∞:** 1.0  
**–î–∞—Ç–∞:** 12 —è–Ω–≤–∞—Ä—è 2026  
**–ò—Å—Ç–æ—á–Ω–∏–∫:** —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π consrag_front  
**–ê–Ω–∞–ª–∏—Ç–∏–∫:** Senior Product + System Analyst + Frontend Architect

---

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [Executive Summary](#1-executive-summary)
2. [–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞](#2-–∫—Ä–∞—Ç–∫–æ–µ-–æ–ø–∏—Å–∞–Ω–∏–µ-–ø—Ä–æ–¥—É–∫—Ç–∞)
3. [–ö–∞—Ä—Ç–∞ –ø—Ä–æ–¥—É–∫—Ç–∞](#3-–∫–∞—Ä—Ç–∞-–ø—Ä–æ–¥—É–∫—Ç–∞)
4. [–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–æ–≤](#4-–¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è-—ç–∫—Ä–∞–Ω–æ–≤)
5. [Feature Inventory](#5-feature-inventory)
6. [–¢–∞—Ä–∏—Ñ—ã, –ª–∏–º–∏—Ç—ã, paywall](#6-—Ç–∞—Ä–∏—Ñ—ã-–ª–∏–º–∏—Ç—ã-paywall)
7. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã](#7-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏-–∏-–≤–Ω–µ—à–Ω–∏–µ-—Å–µ—Ä–≤–∏—Å—ã)
8. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ñ—Ä–æ–Ω—Ç–∞](#8-—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Ñ—Ä–æ–Ω—Ç–∞)
9. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#9-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-–∏-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
10. [–°–ª–µ–¥—ã –ø–ª–∞–Ω–æ–≤/—Ä–æ–∞–¥–º–∞–ø–∞ –≤ –∫–æ–¥–µ](#10-—Å–ª–µ–¥—ã-–ø–ª–∞–Ω–æ–≤-—Ä–æ–∞–¥–º–∞–ø–∞-–≤-–∫–æ–¥–µ)
11. [–†–∏—Å–∫–∏ –∏ –Ω–µ–ø–æ–Ω—è—Ç–∫–∏](#11-—Ä–∏—Å–∫–∏-–∏-–Ω–µ–ø–æ–Ω—è—Ç–∫–∏)
12. [–í–æ–ø—Ä–æ—Å—ã –∫ Backend](#12-–≤–æ–ø—Ä–æ—Å—ã-–∫-backend)

---

## 1. Executive Summary

### –ß—Ç–æ —ç—Ç–æ –∑–∞ –ø—Ä–æ–¥—É–∫—Ç

**AI Avatar Platform** ‚Äî —ç—Ç–æ B2B SaaS-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è AI-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞–º–∏ (–∞–≤–∞—Ç–∞—Ä–∞–º–∏), —Ä–∞–±–æ—Ç–∞—é—â–∏–º–∏ –Ω–∞ –±–∞–∑–µ **RAG (Retrieval-Augmented Generation)**. –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–º–ø–∞–Ω–∏—è–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤, –æ–±—É—á–µ–Ω–Ω—ã—Ö –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö, –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –≤ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∫–∞–Ω–∞–ª—ã (–≤–µ–±, Telegram).

### –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è

- **OWNER** ‚Äî –≤–ª–∞–¥–µ–ª—å—Ü—ã –±–∏–∑–Ω–µ—Å–∞, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–∑–¥–∞—é—Ç –ø—Ä–æ–µ–∫—Ç—ã –∏ AI-–∞–≤–∞—Ç–∞—Ä—ã
- **MANAGER** ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä—ã –∫–æ–º–∞–Ω–¥, —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ –∞–≤–∞—Ç–∞—Ä–∞–º–∏ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
- **CONTENT_MANAGER** ‚Äî —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã –ø–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É, –∑–∞–≥—Ä—É–∂–∞—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- **SAAS_ADMIN** ‚Äî –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (—Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞, –±–∏–ª–ª–∏–Ω–≥)

### –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å

1. **–°–æ–∑–¥–∞–Ω–∏–µ AI-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–æ–≤** –±–µ–∑ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
2. **RAG –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö** –∫–æ–º–ø–∞–Ω–∏–∏ ‚Äî –∞–≤–∞—Ç–∞—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–π –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
3. **–ú–Ω–æ–≥–æ–∫–∞–Ω–∞–ª—å–Ω–æ—Å—Ç—å** ‚Äî –≤–µ–±-—á–∞—Ç, Telegram (WhatsApp ‚Äî –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
4. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π** ‚Äî –≥—Ä–∞–Ω—É–ª—è—Ä–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤
5. **–¢–æ–∫–µ–Ω–Ω—ã–π –±–∏–ª–ª–∏–Ω–≥** ‚Äî –æ–ø–ª–∞—Ç–∞ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å –≥–∏–±–∫–∏–º–∏ –ª–∏–º–∏—Ç–∞–º–∏

### Happy Path —Å—Ü–µ–Ω–∞—Ä–∏–π

```
1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Üí 2. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ ‚Üí 3. –°–æ–∑–¥–∞–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞ ‚Üí
4. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ ‚Üí 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ ‚Üí 6. –ü—É–±–ª–∏–∫–∞—Ü–∏—è ‚Üí
7. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Telegram ‚Üí 8. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ –∞–Ω–∞–ª–∏—Ç–∏–∫—É
```

---

## 2. –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º: `docs/FRONTEND_TZ.md`]

–ï–¥–∏–Ω–∞—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã AI Avatar ‚Äî SaaS-—Ä–µ—à–µ–Ω–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è AI-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞–º–∏, —Ä–∞–±–æ—Ç–∞—é—â–∏–º–∏ –Ω–∞ –±–∞–∑–µ RAG.

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º: `docs/FRONTEND_TZ.md`]

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏** | CRUD –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Ä–æ–ª–∏, —Å—Ç–∞—Ç—É—Å—ã (—Ç–æ–ª—å–∫–æ SAAS_ADMIN) |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏** | –°–æ–∑–¥–∞–Ω–∏–µ, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —É—á–∞—Å—Ç–Ω–∏–∫–∏, —Å–µ–∫—Ä–µ—Ç—ã |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞–º–∏** | CRUD –∞–≤–∞—Ç–∞—Ä–æ–≤, –ø—Ä–æ–º–ø—Ç—ã, LLM-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏** | –ó–∞–≥—Ä—É–∑–∫–∞, –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è, –ø—Ä–æ—Å–º–æ—Ç—Ä —á–∞–Ω–∫–æ–≤ |
| **–¢–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç** | –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞ |
| **Telegram-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** | –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–æ—Ç–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ |
| **End Users (B2C)** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω–µ—á–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ |
| **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã |
| **–ë–∏–ª–ª–∏–Ω–≥** | –õ–∏–º–∏—Ç—ã —Ç–æ–∫–µ–Ω–æ–≤, –ø–ª–∞–Ω—ã, –±–æ–Ω—É—Å—ã |
| **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** | Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è OWNER –∏ ADMIN |

### –î–æ–º–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º: `src/shared/types/api/`]

```
User ‚Üí Project ‚Üí Avatar ‚Üí Document ‚Üí Chunk
                    ‚Üì
               ChatSession ‚Üí ChatMessage
                    ‚Üì
               EndUser ‚Üí Conversation ‚Üí Message
```

---

## 3. –ö–∞—Ä—Ç–∞ –ø—Ä–æ–¥—É–∫—Ç–∞

### 3.1 –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º: `middleware.ts`, `authStore.ts`]

| –†–æ–ª—å | –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | –£—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞ |
|------|-----|----------|-----------------|
| **SAAS_ADMIN** | `saas_admin` | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º—É |
| **OWNER** | `owner` | –í–ª–∞–¥–µ–ª–µ—Ü –ø—Ä–æ–µ–∫—Ç–æ–≤ | –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤, –≤—Å–µ –ø—Ä–∞–≤–∞ –≤ —Å–≤–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö |
| **MANAGER** | `manager` | –ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞ | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞–º–∏, –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ |
| **CONTENT_MANAGER** | `content_manager` | –ö–æ–Ω—Ç–µ–Ω—Ç-–º–µ–Ω–µ–¥–∂–µ—Ä | –¢–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç—ã |
| **CLIENT** | `client` | –ö–ª–∏–µ–Ω—Ç | [–í–µ—Ä–æ—è—Ç–Ω–æ] –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞, —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä |

### 3.2 –ú–∞—Ç—Ä–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–∞–∑–¥–µ–ª–∞–º [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º: `docs/FRONTEND_TZ.md`]

| –†–∞–∑–¥–µ–ª | SAAS_ADMIN | OWNER | MANAGER | CONTENT_MANAGER |
|--------|:----------:|:-----:|:-------:|:---------------:|
| /admin/* | ‚úÖ | ‚ùå | ‚ùå | ‚ùå |
| –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ | ‚úÖ | ‚úÖ* | ‚ùå | ‚ùå |
| –£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ | ‚úÖ | ‚úÖ* | ‚ùå | ‚ùå |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞–º–∏ | ‚úÖ | ‚úÖ* | ‚úÖ* | ‚ùå |
| –î–æ–∫—É–º–µ–Ω—Ç—ã | ‚úÖ | ‚úÖ* | ‚úÖ* | ‚úÖ* |
| –¢–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |

> *–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –≤ ProjectMember

### 3.3 –†–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º: `project.types.ts`, `permission-guard.tsx`]

| –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ | –ü–æ–ª–µ API | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|----------|----------|
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ | `can_manage_settings` | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, —Å–µ–∫—Ä–µ—Ç—ã |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ | `can_manage_members` | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞–º–∏ | `can_manage_avatars` | –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–æ–≤ |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ | `can_manage_documents` | –ó–∞–≥—Ä—É–∑–∫–∞/—É–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ |
| –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ | `can_view_analytics` | –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ |

### 3.4 Sitemap / –ö–∞—Ä—Ç–∞ —ç–∫—Ä–∞–Ω–æ–≤ [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º: `routes.ts`]

```
/
‚îú‚îÄ‚îÄ /login                    # –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
‚îú‚îÄ‚îÄ /register                 # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ /design-system            # –î–µ–º–æ UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ /projects                 # –°–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ /new                  # –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ /[id]                 # Dashboard –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ       ‚îú‚îÄ‚îÄ /avatars          # –°–ø–∏—Å–æ–∫ –∞–≤–∞—Ç–∞—Ä–æ–≤
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ /new          # –°–æ–∑–¥–∞–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ /[avatarId]   # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤–∞—Ç–∞—Ä–∞
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ /documents    # –î–æ–∫—É–º–µ–Ω—Ç—ã
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ /chat         # –¢–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ /sessions     # –ò—Å—Ç–æ—Ä–∏—è —Å–µ—Å—Å–∏–π
‚îÇ       ‚îú‚îÄ‚îÄ /members          # –£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ       ‚îú‚îÄ‚îÄ /users            # End Users (B2C)
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ /[userId]     # –î–µ—Ç–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ /conversations/[convId] # –î–∏–∞–ª–æ–≥
‚îÇ       ‚îú‚îÄ‚îÄ /analytics        # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ       ‚îú‚îÄ‚îÄ /settings         # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ /secrets      # –°–µ–∫—Ä–µ—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ       ‚îî‚îÄ‚îÄ /integrations
‚îÇ           ‚îî‚îÄ‚îÄ /telegram     # Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ               ‚îú‚îÄ‚îÄ /stats    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Telegram
‚îÇ               ‚îî‚îÄ‚îÄ /sessions # –°–µ—Å—Å–∏–∏ Telegram
‚îÇ
‚îú‚îÄ‚îÄ /settings                 # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ /profile              # –ü—Ä–æ—Ñ–∏–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ /password             # –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ /usage                # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ /notifications        # Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îÇ
‚îî‚îÄ‚îÄ /admin                    # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (SAAS_ADMIN)
    ‚îú‚îÄ‚îÄ /users                # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
    ‚îÇ   ‚îú‚îÄ‚îÄ /new              # –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    ‚îÇ   ‚îî‚îÄ‚îÄ /[id]             # –î–µ—Ç–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    ‚îú‚îÄ‚îÄ /analytics            # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
    ‚îú‚îÄ‚îÄ /billing              # –ë–∏–ª–ª–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    ‚îú‚îÄ‚îÄ /requests             # –ó–∞—è–≤–∫–∏ (plan upgrade, demo)
    ‚îú‚îÄ‚îÄ /audit                # –ê—É–¥–∏—Ç –ª–æ–≥–∏
    ‚îú‚îÄ‚îÄ /notifications        # –õ–æ–≥–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    ‚îî‚îÄ‚îÄ /settings
        ‚îú‚îÄ‚îÄ /platform         # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
        ‚îî‚îÄ‚îÄ /telegram-notifications # Telegram-–±–æ—Ç—ã
```

### 3.5 –ù–∞–≤–∏–≥–∞—Ü–∏—è (Sidebar) [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º: `Sidebar.tsx`]

**–û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è:**
- –ü—Ä–æ–µ–∫—Ç—ã (—Å dropdown –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 5 –ø—Ä–æ–µ–∫—Ç–æ–≤)

**–ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞ (–∫–æ–≥–¥–∞ –≤—ã–±—Ä–∞–Ω –ø—Ä–æ–µ–∫—Ç):**
- –û–±–∑–æ—Ä
- –ê–≤–∞—Ç–∞—Ä—ã
- –£—á–∞—Å—Ç–Ω–∏–∫–∏ ‚Üí –ö–æ–º–∞–Ω–¥–∞ / –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- Telegram
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –û–±—â–∏–µ / –°–µ–∫—Ä–µ—Ç—ã

**–ö–æ–Ω—Ç–µ–∫—Å—Ç –∞–≤–∞—Ç–∞—Ä–∞:**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤–∞—Ç–∞—Ä–∞
- –î–æ–∫—É–º–µ–Ω—Ç—ã
- –¢–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç
- –ò—Å—Ç–æ—Ä–∏—è —Å–µ—Å—Å–∏–π

**–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (—Ç–æ–ª—å–∫–æ SAAS_ADMIN):**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- –ë–∏–ª–ª–∏–Ω–≥
- –ó–∞—è–≤–∫–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- Telegram-–±–æ—Ç—ã
- –õ–æ–≥–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –ê—É–¥–∏—Ç –ª–æ–≥–∏

**Footer –Ω–∞–≤–∏–≥–∞—Ü–∏—è:**
- TokenCounter (–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤)
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
- –ü–æ–º–æ—â—å

---

## 4. –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–æ–≤

### –¢–∞–±–ª–∏—Ü–∞ —ç–∫—Ä–∞–Ω–æ–≤

| –≠–∫—Ä–∞–Ω | Route | –†–æ–ª—å/–¥–æ—Å—Ç—É–ø | –û—Å–Ω–æ–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è | API –≤—ã–∑–æ–≤—ã | –í–∞–ª–∏–¥–∞—Ü–∏–∏ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ |
|-------|-------|-------------|-------------------|------------|-----------|-------------|
| **–õ–æ–≥–∏–Ω** | `/login` | Public | –í—Ö–æ–¥ | `POST /auth/login` | email, password min 8 | Redirect –ø–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞ –≤ /projects |
| **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** | `/register` | Public | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è | `POST /auth/register` | email, password strong | –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ ‚Äî –ª–æ–≥–∏–Ω |
| **–°–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤** | `/projects` | Auth | –ü—Ä–æ—Å–º–æ—Ç—Ä, —Å–æ–∑–¥–∞–Ω–∏–µ | `GET /projects` | - | Grid –∫–∞—Ä—Ç–æ—á–µ–∫ |
| **–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞** | `/projects/new` | OWNER+ | –°–æ–∑–¥–∞–Ω–∏–µ | `POST /projects` | name required, slug pattern | Wizard –∏–ª–∏ —Ñ–æ—Ä–º–∞ |
| **Dashboard –ø—Ä–æ–µ–∫—Ç–∞** | `/projects/[id]` | Auth + –¥–æ—Å—Ç—É–ø | –û–±–∑–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ | `GET /projects/{id}`, analytics | - | StatsCards |
| **–°–ø–∏—Å–æ–∫ –∞–≤–∞—Ç–∞—Ä–æ–≤** | `/projects/[id]/avatars` | Auth | –ü—Ä–æ—Å–º–æ—Ç—Ä, —Ñ–∏–ª—å—Ç—Ä—ã | `GET /projects/{id}/avatars` | - | –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É |
| **–°–æ–∑–¥–∞–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞** | `/projects/[id]/avatars/new` | can_manage_avatars | Wizard —Å–æ–∑–¥–∞–Ω–∏—è | `POST /projects/{id}/avatars` | name required | 4 —à–∞–≥–∞ |
| **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤–∞—Ç–∞—Ä–∞** | `/projects/[id]/avatars/[avatarId]` | can_manage_avatars | CRUD, publish | `GET/PUT/DELETE avatar`, `POST publish` | - | Tabs: –æ—Å–Ω–æ–≤–Ω—ã–µ, –ø—Ä–æ–º–ø—Ç—ã, LLM, –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥ |
| **–î–æ–∫—É–º–µ–Ω—Ç—ã** | `/projects/[id]/avatars/[avatarId]/documents` | can_manage_documents | Upload, delete, reindex | `GET/POST/DELETE documents` | –§–æ—Ä–º–∞—Ç, —Ä–∞–∑–º–µ—Ä | Drag&Drop, —Å—Ç–∞—Ç—É—Å—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ |
| **–¢–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç** | `/projects/[id]/avatars/[avatarId]/chat` | Auth | –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π | `POST /chat/{id}/message` | - | Markdown, –∏—Å—Ç–æ—á–Ω–∏–∫–∏, feedback |
| **–ò—Å—Ç–æ—Ä–∏—è —Å–µ—Å—Å–∏–π** | `/projects/[id]/avatars/[avatarId]/sessions` | Auth | –ü—Ä–æ—Å–º–æ—Ç—Ä | `GET /chat/admin/sessions` | - | –¢–∞–±–ª–∏—Ü–∞ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π |
| **–£—á–∞—Å—Ç–Ω–∏–∫–∏** | `/projects/[id]/members` | can_view_analytics | CRUD —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ | `GET/POST/PUT/DELETE members` | - | –ü—Ä–∞–≤–∞ –ø–æ —á–µ–∫–±–æ–∫—Å–∞–º |
| **End Users** | `/projects/[id]/users` | Auth | –ü—Ä–æ—Å–º–æ—Ç—Ä, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ | `GET /projects/{id}/end-users` | - | –§–∏–ª—å—Ç—Ä—ã: —Å—Ç–∞—Ç—É—Å, –∫–∞–Ω–∞–ª |
| **Telegram** | `/projects/[id]/integrations/telegram` | can_manage_settings | Setup, webhook | `GET/POST/PUT /telegram/{id}` | Bot token | –°—Ç–∞—Ç—É—Å webhook |
| **–ü—Ä–æ—Ñ–∏–ª—å** | `/settings/profile` | Auth | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | `GET/PUT /auth/me` | - | - |
| **–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è** | `/settings/password` | Auth | –°–º–µ–Ω–∞ | `POST /auth/me/password` | –¢–µ–∫—É—â–∏–π + –Ω–æ–≤—ã–π | - |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** | `/settings/usage` | Auth | –ü—Ä–æ—Å–º–æ—Ç—Ä | `GET /billing/usage/*` | - | –ì—Ä–∞—Ñ–∏–∫–∏, –ø—Ä–æ–≥—Ä–µ—Å—Å |
| **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** | `/settings/notifications` | OWNER | –ü—Ä–∏–≤—è–∑–∫–∞ Telegram | `POST/DELETE /notifications/telegram/link` | - | QR, –∫–æ–¥, —Ç–∞–π–º–µ—Ä |
| **–ê–¥–º–∏–Ω: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** | `/admin/users` | SAAS_ADMIN | CRUD | `GET/POST/PUT /auth/users` | - | –§–∏–ª—å—Ç—Ä—ã, –ø–∞–≥–∏–Ω–∞—Ü–∏—è |
| **–ê–¥–º–∏–Ω: –ë–∏–ª–ª–∏–Ω–≥** | `/admin/billing` | SAAS_ADMIN | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞–º–∏ | `GET /billing/admin/*` | - | –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–æ–≤, –±–æ–Ω—É—Å—ã |
| **–ê–¥–º–∏–Ω: –ó–∞—è–≤–∫–∏** | `/admin/requests` | SAAS_ADMIN | –û–±—Ä–∞–±–æ—Ç–∫–∞ | `GET/PATCH /plan-requests` | - | –°—Ç–∞—Ç—É—Å—ã –∑–∞—è–≤–æ–∫ |
| **–ê–¥–º–∏–Ω: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞** | `/admin/analytics` | SAAS_ADMIN | –ü—Ä–æ—Å–º–æ—Ç—Ä | `GET /analytics/platform` | - | StatsCards |
| **–ê–¥–º–∏–Ω: –ê—É–¥–∏—Ç** | `/admin/audit` | SAAS_ADMIN | –ü—Ä–æ—Å–º–æ—Ç—Ä | `GET /analytics/platform/audit` | - | –§–∏–ª—å—Ç—Ä—ã, –ø–∞–≥–∏–Ω–∞—Ü–∏—è |

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ —ç–∫—Ä–∞–Ω–∞–º

| –≠–∫—Ä–∞–Ω | –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã |
|-------|---------------------|
| –õ–æ–≥–∏–Ω/–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è | Form, Input, Button, Alert |
| –°–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ | ProjectCard, EmptyState, Skeleton, Button |
| Dashboard –ø—Ä–æ–µ–∫—Ç–∞ | StatsCard, AvatarsList (mini) |
| –°–ø–∏—Å–æ–∫ –∞–≤–∞—Ç–∞—Ä–æ–≤ | AvatarCard, Badge (status), EmptyState |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤–∞—Ç–∞—Ä–∞ | Tabs, Form, Textarea, Select, ColorPicker |
| –î–æ–∫—É–º–µ–Ω—Ç—ã | FileUpload, Table, Badge (status), Progress |
| –¢–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç | ChatContainer, ChatInput, MessageBubble, Sources |
| –£—á–∞—Å—Ç–Ω–∏–∫–∏ | Table, Dialog, Checkbox (–ø—Ä–∞–≤–∞) |
| End Users | Table, Badge, Pagination, Filters |
| –ë–∏–ª–ª–∏–Ω–≥ | StatsCard, Table, Dialog (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ), UsageProgressBar |

---

## 5. Feature Inventory

### 5.1 Auth/Users [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

| –§–∏—á–∞ | –°—Ç–∞—Ç—É—Å | –§–∞–π–ª—ã |
|------|--------|-------|
| Email/Password Login | ‚úÖ –ì–æ—Ç–æ–≤–æ | `authApi.ts`, `useAuth.ts` |
| –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è | ‚úÖ –ì–æ—Ç–æ–≤–æ | `authApi.ts`, `register/page.tsx` |
| JWT + Refresh Token | ‚úÖ –ì–æ—Ç–æ–≤–æ | `apiClient.ts` (proactive refresh) |
| Cookies –¥–ª—è SSR | ‚úÖ –ì–æ—Ç–æ–≤–æ | `authApi.ts`, `middleware.ts` |
| –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è | ‚úÖ –ì–æ—Ç–æ–≤–æ | `authApi.ts` |
| –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è | ‚úÖ –ì–æ—Ç–æ–≤–æ | `authApi.ts` |
| OAuth / Social Login | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | - |
| Forgot Password | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | –†–æ—É—Ç –µ—Å—Ç—å –≤ routes.ts, –Ω–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ—Ç |
| Email Verification | ‚ö†Ô∏è [–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ] | –ü–æ–ª–µ `is_email_verified` –µ—Å—Ç—å, flow –Ω–µ—è—Å–µ–Ω |

### 5.2 Billing/Plans [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º: `billing.types.ts`, `BILLING_DOCUMENTATION.md`]

| –§–∏—á–∞ | –°—Ç–∞—Ç—É—Å | –§–∞–π–ª—ã |
|------|--------|-------|
| 5 –ø–ª–∞–Ω–æ–≤ (FREE ‚Üí ENTERPRISE) | ‚úÖ –ì–æ—Ç–æ–≤–æ | `billing.types.ts` |
| –õ–∏–º–∏—Ç—ã —Ç–æ–∫–µ–Ω–æ–≤ (chat/embedding) | ‚úÖ –ì–æ—Ç–æ–≤–æ | `billingApi.ts` |
| Usage tracking | ‚úÖ –ì–æ—Ç–æ–≤–æ | `useBilling.ts` |
| Overage (–ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ) | ‚úÖ –ì–æ—Ç–æ–≤–æ | `billing.types.ts` |
| –ë–æ–Ω—É—Å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã | ‚úÖ –ì–æ—Ç–æ–≤–æ | `billingApi.ts` |
| –°–±—Ä–æ—Å –ø–µ—Ä–∏–æ–¥–∞ (admin) | ‚úÖ –ì–æ—Ç–æ–≤–æ | `billingApi.ts` |
| –°–º–µ–Ω–∞ –ø–ª–∞–Ω–∞ (admin) | ‚úÖ –ì–æ—Ç–æ–≤–æ | `billingApi.ts` |
| Stripe/PayPal –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | –£–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –∫–∞–∫ TODO –≤ docs |
| Self-service upgrade | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ admin |
| Public pricing page | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | –ù–µ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ GET /plans |

### 5.3 Core Feature: Avatars [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

| –§–∏—á–∞ | –°—Ç–∞—Ç—É—Å | –§–∞–π–ª—ã |
|------|--------|-------|
| CRUD –∞–≤–∞—Ç–∞—Ä–æ–≤ | ‚úÖ –ì–æ—Ç–æ–≤–æ | `avatarApi.ts`, `useAvatar.ts` |
| Publish/Unpublish | ‚úÖ –ì–æ—Ç–æ–≤–æ | `avatarApi.ts` |
| System Prompt | ‚úÖ –ì–æ—Ç–æ–≤–æ | `avatar.types.ts` |
| Welcome/Fallback messages | ‚úÖ –ì–æ—Ç–æ–≤–æ | `avatar.types.ts` |
| LLM settings override | ‚úÖ –ì–æ—Ç–æ–≤–æ | `avatar.types.ts` (model, temperature, top_k) |
| Avatar image | ‚úÖ –ì–æ—Ç–æ–≤–æ | `avatar.types.ts` |
| Avatar stats | ‚úÖ –ì–æ—Ç–æ–≤–æ | `avatarApi.ts` |
| RAG –ø–æ–∏—Å–∫ | ‚úÖ [–í–µ—Ä–æ—è—Ç–Ω–æ] | Backend, —Ñ—Ä–æ–Ω—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç sources |

### 5.4 Core Feature: Documents [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

| –§–∏—á–∞ | –°—Ç–∞—Ç—É—Å | –§–∞–π–ª—ã |
|------|--------|-------|
| Upload documents | ‚úÖ –ì–æ—Ç–æ–≤–æ | `documentApi.ts` |
| –°—Ç–∞—Ç—É—Å—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ | ‚úÖ –ì–æ—Ç–æ–≤–æ | 7 —Å—Ç–∞—Ç—É—Å–æ–≤ –≤ `document.types.ts` |
| –ü—Ä–æ—Å–º–æ—Ç—Ä —á–∞–Ω–∫–æ–≤ | ‚úÖ –ì–æ—Ç–æ–≤–æ | `documentApi.ts` |
| Reindex | ‚úÖ –ì–æ—Ç–æ–≤–æ | `documentApi.ts` |
| Drag & Drop | ‚úÖ –ì–æ—Ç–æ–≤–æ | `file-upload.tsx` |
| –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã | ‚úÖ –ì–æ—Ç–æ–≤–æ | PDF, DOCX, TXT, MD, HTML |
| –õ–∏–º–∏—Ç—ã —Ä–∞–∑–º–µ—Ä–∞ | ‚úÖ –ì–æ—Ç–æ–≤–æ | PDF 50MB, DOCX 20MB, –æ—Å—Ç–∞–ª—å–Ω—ã–µ 10MB |

### 5.5 Core Feature: Chat [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

| –§–∏—á–∞ | –°—Ç–∞—Ç—É—Å | –§–∞–π–ª—ã |
|------|--------|-------|
| Create session | ‚úÖ –ì–æ—Ç–æ–≤–æ | `chatApi.ts` |
| Send message | ‚úÖ –ì–æ—Ç–æ–≤–æ | `chatApi.ts` |
| Chat history | ‚úÖ –ì–æ—Ç–æ–≤–æ | `chatApi.ts` |
| Sources (RAG references) | ‚úÖ –ì–æ—Ç–æ–≤–æ | `chat.types.ts` (MessageSource) |
| Feedback (üëç/üëé) | ‚úÖ –ì–æ—Ç–æ–≤–æ | `chatApi.ts` |
| Markdown rendering | ‚úÖ –ì–æ—Ç–æ–≤–æ | `chat.tsx` |
| Admin sessions list | ‚úÖ –ì–æ—Ç–æ–≤–æ | `chatApi.ts` |
| Streaming responses | ‚ùå [–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ] | –ù–µ –≤–∏–¥–Ω–æ –≤ –∫–æ–¥–µ |

### 5.6 Integrations [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

| –§–∏—á–∞ | –°—Ç–∞—Ç—É—Å | –§–∞–π–ª—ã |
|------|--------|-------|
| Telegram Bot (project) | ‚úÖ –ì–æ—Ç–æ–≤–æ | `telegramApi.ts`, `useTelegram.ts` |
| Webhook setup | ‚úÖ –ì–æ—Ç–æ–≤–æ | `telegramApi.ts` |
| Telegram stats | ‚úÖ –ì–æ—Ç–æ–≤–æ | `telegramApi.ts` |
| Telegram sessions | ‚úÖ –ì–æ—Ç–æ–≤–æ | `telegramApi.ts` |
| WhatsApp | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | –£–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –≤ end-user types |
| Email channel | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | –£–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –≤ end-user types |
| API channel | ‚úÖ [–í–µ—Ä–æ—è—Ç–Ω–æ] | –ï—Å—Ç—å –≤ ChatSource |

### 5.7 Notifications [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º: `TELEGRAM_NOTIFICATIONS_API.md`]

| –§–∏—á–∞ | –°—Ç–∞—Ç—É—Å | –§–∞–π–ª—ã |
|------|--------|-------|
| Admin Bot (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω—É) | ‚úÖ –ì–æ—Ç–æ–≤–æ | `notificationApi.ts` |
| User Bot (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è OWNER) | ‚úÖ –ì–æ—Ç–æ–≤–æ | `notificationApi.ts` |
| –ü—Ä–∏–≤—è–∑–∫–∞ Telegram (OWNER) | ‚úÖ –ì–æ—Ç–æ–≤–æ | `notificationApi.ts` |
| –õ–æ–≥–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π | ‚úÖ –ì–æ—Ç–æ–≤–æ | `notificationApi.ts` |
| Email notifications | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | - |

### 5.8 Analytics [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

| –§–∏—á–∞ | –°—Ç–∞—Ç—É—Å | –§–∞–π–ª—ã |
|------|--------|-------|
| Platform analytics (admin) | ‚úÖ –ì–æ—Ç–æ–≤–æ | `analyticsApi.ts` |
| Audit logs | ‚úÖ –ì–æ—Ç–æ–≤–æ | `analyticsApi.ts` |
| Project usage | ‚úÖ –ì–æ—Ç–æ–≤–æ | `analyticsApi.ts` |
| Project trend | ‚úÖ –ì–æ—Ç–æ–≤–æ | `analyticsApi.ts` |
| Usage charts | ‚úÖ –ì–æ—Ç–æ–≤–æ | `usage-chart.tsx` |

### 5.9 End Users (B2C) [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

| –§–∏—á–∞ | –°—Ç–∞—Ç—É—Å | –§–∞–π–ª—ã |
|------|--------|-------|
| End users list | ‚úÖ –ì–æ—Ç–æ–≤–æ | `endUserApi.ts` |
| User detail + identities | ‚úÖ –ì–æ—Ç–æ–≤–æ | `end-user.types.ts` |
| Block/Unblock | ‚úÖ –ì–æ—Ç–æ–≤–æ | `endUserApi.ts` |
| User limits | ‚úÖ –ì–æ—Ç–æ–≤–æ | `endUserApi.ts` |
| Conversations | ‚úÖ –ì–æ—Ç–æ–≤–æ | `endUserApi.ts` |
| Send message to user | ‚úÖ –ì–æ—Ç–æ–≤–æ | `endUserApi.ts` |

### 5.10 Plan Requests [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

| –§–∏—á–∞ | –°—Ç–∞—Ç—É—Å | –§–∞–π–ª—ã |
|------|--------|-------|
| Create request (public) | ‚úÖ –ì–æ—Ç–æ–≤–æ | `planRequestApi.ts` |
| List/Update (admin) | ‚úÖ –ì–æ—Ç–æ–≤–æ | `planRequestApi.ts` |
| Types: upgrade, demo, contact | ‚úÖ –ì–æ—Ç–æ–≤–æ | `plan-request.types.ts` |
| Telegram notification | ‚úÖ –ì–æ—Ç–æ–≤–æ | `TELEGRAM_NOTIFICATIONS_API.md` |

### 5.11 Security/RBAC [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

| –§–∏—á–∞ | –°—Ç–∞—Ç—É—Å | –§–∞–π–ª—ã |
|------|--------|-------|
| JWT auth | ‚úÖ –ì–æ—Ç–æ–≤–æ | `apiClient.ts` |
| Role-based routing | ‚úÖ –ì–æ—Ç–æ–≤–æ | `middleware.ts` |
| Permission guard component | ‚úÖ –ì–æ—Ç–æ–≤–æ | `permission-guard.tsx` |
| Project-level permissions | ‚úÖ –ì–æ—Ç–æ–≤–æ | `permission-guard.tsx` |
| CSRF protection | ‚ùå [–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ] | –ù–µ –≤–∏–¥–Ω–æ –≤ –∫–æ–¥–µ |

---

## 6. –¢–∞—Ä–∏—Ñ—ã, –ª–∏–º–∏—Ç—ã, paywall

### 6.1 –ü–ª–∞–Ω—ã –ø–æ–¥–ø–∏—Å–∫–∏ [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º: `BILLING_DOCUMENTATION.md`]

| –ü–ª–∞–Ω | Chat —Ç–æ–∫–µ–Ω–æ–≤/–º–µ—Å | Embedding/–º–µ—Å | –ü—Ä–æ–µ–∫—Ç—ã | –ê–≤–∞—Ç–∞—Ä—ã/–ø—Ä–æ–µ–∫—Ç | –î–æ–∫—É–º–µ–Ω—Ç—ã/–∞–≤–∞—Ç–∞—Ä | –¶–µ–Ω–∞ |
|------|------------------|---------------|---------|----------------|------------------|------|
| **FREE** | 10,000 | 5,000 | 1 | 1 | 10 | $0 |
| **STARTER** | 100,000 | 50,000 | 3 | 5 | 50 | $29 |
| **GROWTH** | 500,000 | 200,000 | 10 | 20 | 200 | $99 |
| **SCALE** | 2,000,000 | 1,000,000 | 50 | 100 | 1,000 | $299 |
| **ENTERPRISE** | 10,000,000 | 5,000,000 | 1000 | 1000 | 10,000 | Custom |

### 6.2 –§–∏—á–∏ –ø–æ –ø–ª–∞–Ω–∞–º [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

| –ü–ª–∞–Ω | –§–∏—á–∏ |
|------|------|
| **FREE** | basic_chat, basic_analytics, community_support |
| **STARTER** | all_chat_models, full_analytics, telegram_integration, email_support |
| **GROWTH** | + priority_support, api_access, custom_branding, advanced_analytics |
| **SCALE** | + dedicated_support, sla_guarantee, white_label, webhooks |
| **ENTERPRISE** | + custom_integrations, on_premise_option, dedicated_infrastructure, custom_models |

### 6.3 Overage (–ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ) [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

| –ü–ª–∞–Ω | Overage | Chat $/1K | Embedding $/1K |
|------|---------|-----------|----------------|
| FREE | ‚ùå | - | - |
| STARTER | ‚úÖ | $0.030 | $0.003 |
| GROWTH | ‚úÖ | $0.025 | $0.0025 |
| SCALE | ‚úÖ | $0.020 | $0.002 |
| ENTERPRISE | ‚úÖ | $0.015 | $0.0015 |

### 6.4 –õ–∏–º–∏—Ç—ã –∏ –∏—Ö –ø—Ä–æ–≤–µ—Ä–∫–∞ [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

**–¢–∏–ø—ã –ª–∏–º–∏—Ç–æ–≤:**
1. **–¢–æ–∫–µ–Ω—ã —á–∞—Ç–∞** ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ LLM –∑–∞–ø—Ä–æ—Å—ã
2. **–¢–æ–∫–µ–Ω—ã embedding** ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
3. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–µ–∫—Ç–æ–≤** ‚Äî `max_projects`
4. **–ê–≤–∞—Ç–∞—Ä—ã –Ω–∞ –ø—Ä–æ–µ–∫—Ç** ‚Äî `max_avatars_per_project`
5. **–î–æ–∫—É–º–µ–Ω—Ç—ã –Ω–∞ –∞–≤–∞—Ç–∞—Ä** ‚Äî `max_documents_per_avatar`

**–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:** API `/api/v1/billing/usage/summary` [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

**UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –ª–∏–º–∏—Ç–æ–≤:**
- `TokenCounter` ‚Äî –≤ sidebar, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º: `Sidebar.tsx`]
- `LimitAlert` ‚Äî –±–∞–Ω–Ω–µ—Ä –ø—Ä–∏ 80%/90%/100% [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º: `limit-alert.tsx`]
- `TokenLimitDialog` ‚Äî –º–æ–¥–∞–ª–∫–∞ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º: `token-limit-dialog.tsx`]
- `UsageProgressBar` ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

### 6.5 –õ–æ–≥–∏–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

```typescript
// apiClient.ts - –ø–µ—Ä–µ—Ö–≤–∞—Ç –æ—à–∏–±–æ–∫ –ª–∏–º–∏—Ç–æ–≤
const TOKEN_LIMIT_ERROR_CODES = ["TOKEN_LIMIT_EXCEEDED", "EMBEDDING_LIMIT_EXCEEDED"];

// –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏:
// 1. Emit event ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å TokenLimitDialog
// 2. Toast notification —Å –∫–Ω–æ–ø–∫–æ–π "–£–ª—É—á—à–∏—Ç—å –ø–ª–∞–Ω"
// 3. Redirect –Ω–∞ /settings/usage

// limit-alert.tsx - —É—Ä–æ–≤–Ω–∏ –∞–ª–µ—Ä—Ç–æ–≤
if (usagePercent >= 100) return "exceeded";
if (usagePercent >= 90) return "critical";
if (usagePercent >= 80) return "warning";
```

### 6.6 –°–æ–±—ã—Ç–∏—è –±–∏–ª–ª–∏–Ω–≥–∞ [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º: `TELEGRAM_NOTIFICATIONS_API.md`]

| –°–æ–±—ã—Ç–∏–µ | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ |
|---------|-------------|
| 80% –ª–∏–º–∏—Ç–∞ | `limit_warning_80` |
| 90% –ª–∏–º–∏—Ç–∞ | `limit_warning_90` |
| 100% –ª–∏–º–∏—Ç–∞ | `limit_exceeded` |
| –ü–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç | `subscription_expiring_7d/3d/1d` |
| –ü–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–ª–∞ | `subscription_expired` |
| –°–º–µ–Ω–∞ –ø–ª–∞–Ω–∞ | `plan_changed` |
| –ë–æ–Ω—É—Å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã | `bonus_tokens_added` |

### 6.7 Paywall –ª–æ–≥–∏–∫–∞ [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

1. **Soft limit** ‚Äî –ø–æ–∫–∞–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π, –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã (–µ—Å–ª–∏ overage —Ä–∞–∑—Ä–µ—à—ë–Ω)
2. **Hard limit** ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ `hard_limit_enabled: true`
3. **Upsell** ‚Äî –∫–Ω–æ–ø–∫–∏ "–£–ª—É—á—à–∏—Ç—å –ø–ª–∞–Ω" –≤–æ –≤—Å–µ—Ö –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è—Ö

**[–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ]:**
- Trial period ‚Äî –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∫–æ–¥–µ
- Grace period ‚Äî –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∫–æ–¥–µ
- Invoices ‚Äî –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ –∫–æ–¥–µ
- Webhooks –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π ‚Äî –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ –∫–æ–¥–µ

---

## 7. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã

### 7.1 –ü–ª–∞—Ç–µ–∂–∏ [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º: `BILLING_DOCUMENTATION.md`]

**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

> –ò–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏: "–ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ø–ª–∞—Ç—ë–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏: Stripe, PayPal –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã"

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏–∑ docs:**
- Stripe Checkout –¥–ª—è –æ–ø–ª–∞—Ç—ã
- Stripe Billing –¥–ª—è –ø–æ–¥–ø–∏—Å–æ–∫
- Webhooks –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞

### 7.2 Auth [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

| –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å |
|------------|--------|
| Email/Password | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| OAuth (Google, GitHub) | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| Magic Link | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| SSO (SAML) | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |

### 7.3 AI/LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã [–í–µ—Ä–æ—è—Ç–Ω–æ - —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –≤ docs]

| –ü—Ä–æ–≤–∞–π–¥–µ—Ä | –ú–æ–¥–µ–ª–∏ |
|-----------|--------|
| OpenAI | gpt-4-turbo-preview, gpt-4-turbo, gpt-4o, gpt-4o-mini, gpt-3.5-turbo |
| OpenAI Embeddings | text-embedding-3-small, text-embedding-3-large |

**Env:** [–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ] ‚Äî –Ω–µ –≤–∏–¥–Ω–æ –≤ —Ñ—Ä–æ–Ω—Ç–µ, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –Ω–∞ backend

### 7.4 Telegram [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

**A) Project Bot (–¥–ª—è End Users):**
- Endpoint: `/api/v1/telegram/{projectId}`
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞: bot_token + avatar_id
- Webhook –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π

**B) Notification Bots (—Å–∏—Å—Ç–µ–º–Ω—ã–µ):**
- Admin Bot ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –≥—Ä—É–ø–ø—É SAAS_ADMIN
- User Bot ‚Äî –ª–∏—á–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è OWNER

**Env:** `PUBLIC_API_URL` –¥–ª—è webhook URL

### 7.5 Storage [–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ]

- –î–æ–∫—É–º–µ–Ω—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ API
- –•—Ä–∞–Ω–µ–Ω–∏–µ ‚Äî –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ backend (S3/local)
- CDN ‚Äî –Ω–µ —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è

### 7.6 Analytics/Tracking [–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ]

- GA/Amplitude/PostHog ‚Äî –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ –∫–æ–¥–µ
- –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ ‚Äî —á–µ—Ä–µ–∑ `/api/v1/analytics/*`

### 7.7 Error Tracking [–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ]

- Sentry ‚Äî –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∫–æ–¥–µ
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ backend

### 7.8 Chat/Support [–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ]

- Intercom/Crisp ‚Äî –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
- –ï—Å—Ç—å —Å—Å—ã–ª–∫–∞ "–ü–æ–º–æ—â—å" –≤ sidebar (href="#")

---

## 8. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ñ—Ä–æ–Ω—Ç–∞

### 8.1 Framework & Routing [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º: `package.json`]

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|--------|------------|
| **Next.js** | 16.1.1 | Framework (App Router) |
| **React** | 19.2.3 | UI Library |
| **TypeScript** | 5+ | –¢–∏–ø–∏–∑–∞—Ü–∏—è |

**Routing:** App Router —Å –≥—Ä—É–ø–ø–∞–º–∏ `(auth)` –∏ `(dashboard)`

**SSR/CSR —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:**
- Middleware –Ω–∞ Edge –¥–ª—è auth –ø—Ä–æ–≤–µ—Ä–∫–∏
- Client components –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü (`"use client"`)
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ‚Äî –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ)

### 8.2 State Management [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|--------|------------|
| **@tanstack/react-query** | 5.90.16 | Server state, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ |
| **zustand** | 5.0.9 | Client state (auth) |

**–ü–∞—Ç—Ç–µ—Ä–Ω—ã:**
- React Query –¥–ª—è –≤—Å–µ—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤
- Zustand —Ç–æ–ª—å–∫–æ –¥–ª—è authStore
- Query keys –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –≤ `*Keys` –æ–±—ä–µ–∫—Ç—ã

### 8.3 API Layer [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º: `apiClient.ts`]

| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|--------|------------|
| **axios** | 1.13.2 | HTTP client |

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Proactive token refresh (–∑–∞ 60 —Å–µ–∫ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è)
- Queue mechanism –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ refresh
- Interceptors –¥–ª—è auth –∏ error handling
- `withCredentials: true` –¥–ª—è cookies

### 8.4 Form Libraries [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|--------|------------|
| **react-hook-form** | 7.70.0 | Form management |
| **zod** | 4.3.5 | Validation schema |
| **@hookform/resolvers** | 5.2.2 | Zod resolver |

### 8.5 UI Kit [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|------------|
| **@radix-ui/react-*** | Accessible primitives |
| **tailwindcss** | 4.x ‚Äî Styling |
| **class-variance-authority** | Variant management |
| **lucide-react** | Icons |
| **sonner** | Toast notifications |
| **recharts** | Charts |
| **cmdk** | Command palette |

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** 40+ –≤ `src/shared/ui/`

### 8.6 i18n [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

**–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- UI —Ç–µ–∫—Å—Ç—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º (hardcoded)
- Error messages –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –≤ `error-messages.ts`
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ i18n –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞
- `tov_language` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ LLM

### 8.7 Permissions/RBAC [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

**Middleware —É—Ä–æ–≤–µ–Ω—å:**
```typescript
// middleware.ts
- PROTECTED_PREFIXES: ["/projects", "/admin", "/settings", "/dashboard"]
- ADMIN_PREFIXES: ["/admin"]
- JWT parsing –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–∏
```

**Component —É—Ä–æ–≤–µ–Ω—å:**
```typescript
// permission-guard.tsx
<PermissionGuard
  requireAdmin={true}
  requirePermission={{ canManageAvatars: true }}
  projectMember={member}
>
  {/* Protected content */}
</PermissionGuard>
```

**Hook —É—Ä–æ–≤–µ–Ω—å:**
```typescript
// usePermissions hook
const { isAdmin, isOwner, canManageProject } = usePermissions();
```

### 8.8 Build/Deploy [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º]

**Development:**
```bash
npm run dev  # next dev --turbopack
```

**Production:**
```bash
npm run build
npm run start
```

**Docker:**
- `Dockerfile` ‚Äî multi-stage build
- `docker-compose.dev.yml` ‚Äî dev —Å hot reload
- `docker-compose.prod.yml` ‚Äî production
- `nginx/` ‚Äî reverse proxy –∫–æ–Ω—Ñ–∏–≥–∏

**–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã–π –¥–µ–ø–ª–æ–π:**
- Docker + Nginx
- Vercel-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ (Next.js)

---

## 9. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 9.1 Environment Variables

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
|------------|------------|------------------|-------------|
| `NEXT_PUBLIC_API_URL` | Base URL –¥–ª—è API | `apiUrlManager.ts`, `apiClient.ts` | ‚úÖ |

**[–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ] ‚Äî –≤–µ—Ä–æ—è—Ç–Ω–æ –Ω—É–∂–Ω—ã –Ω–∞ backend:**
- `OPENAI_API_KEY`
- `DATABASE_URL`
- `REDIS_URL`
- `TELEGRAM_ADMIN_BOT_TOKEN`
- `TELEGRAM_USER_BOT_TOKEN`
- `STRIPE_SECRET_KEY`
- `PUBLIC_API_URL` (–¥–ª—è webhooks)

### 9.2 API URL Manager [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º: `apiUrlManager.ts`]

```typescript
// –î–æ—Å—Ç—É–ø–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
const API_ENVIRONMENTS = [
  { label: "Dev (localhost:8000)", value: "http://localhost:8000" },
  { label: "Prod (api.parmenid.tech)", value: "https://api.parmenid.tech" },
];

// Override —á–µ—Ä–µ–∑ localStorage
localStorage.setItem("api_url_override", "https://api.parmenid.tech");
```

### 9.3 –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –û–∫—Ä—É–∂–µ–Ω–∏–µ | API URL | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|---------|------------|
| **Development** | http://localhost:8000 | –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ |
| **Production** | https://api.parmenid.tech | –ü—Ä–æ–¥–∞–∫—à–µ–Ω |
| **Staging** | [–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ] | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |

### 9.4 Scripts [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º: `package.json`]

```json
{
  "dev": "next dev --turbopack",
  "build": "next build",
  "start": "next start",
  "lint": "eslint src/",
  "lint:fix": "eslint src/ --fix",
  "format": "prettier --write \"src/**/*.{ts,tsx,css}\"",
  "format:check": "prettier --check \"src/**/*.{ts,tsx,css}\""
}
```

---

## 10. –°–ª–µ–¥—ã –ø–ª–∞–Ω–æ–≤/—Ä–æ–∞–¥–º–∞–ø–∞ –≤ –∫–æ–¥–µ

### 10.1 TODO/FIXME

**–ù–∞–π–¥–µ–Ω–æ:**

```typescript
// routes.ts
FORGOT_PASSWORD: "/forgot-password"  // –†–æ—É—Ç –µ—Å—Ç—å, —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ—Ç
```

### 10.2 –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∏

–ù–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∑–Ω–∞—á–∏–º—ã–µ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∏.

### 10.3 –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ñ–∏—á–∏ (–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏)

**BILLING_DOCUMENTATION.md:**
1. `GET /api/v1/billing/plans` ‚Äî –ø—É–±–ª–∏—á–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–ª–∞–Ω–æ–≤
2. `POST /api/v1/billing/subscribe` ‚Äî self-service –ø–æ–¥–ø–∏—Å–∫–∞
3. `POST /api/v1/billing/cancel` ‚Äî –æ—Ç–º–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏
4. Stripe –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**end-user.types.ts:**
- WhatsApp –∫–∞–Ω–∞–ª (`"whatsapp"`)
- Email –∫–∞–Ω–∞–ª (`"email"`)

### 10.4 –ù–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –º–µ—Å—Ç–∞

| –ú–µ—Å—Ç–æ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `/forgot-password` | –†–æ—É—Ç –≤ `routes.ts`, –Ω–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ—Ç |
| –ü–æ–º–æ—â—å | `href="#"` –≤ sidebar |
| Streaming chat | –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| Mobile –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ | –ù–µ —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è |

---

## 11. –†–∏—Å–∫–∏ –∏ –Ω–µ–ø–æ–Ω—è—Ç–∫–∏

### 11.1 –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ

| # | –í–æ–ø—Ä–æ—Å | –†–∏—Å–∫ |
|---|--------|------|
| 1 | –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç email verification? | UX —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–µ—è—Å–µ–Ω |
| 2 | –ï—Å—Ç—å –ª–∏ streaming –¥–ª—è chat? | UX —á–∞—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–º |
| 3 | –ö–∞–∫ –∑–∞—â–∏—â–µ–Ω –ø—É–±–ª–∏—á–Ω—ã–π chat API? | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å |
| 4 | Rate limiting –Ω–∞ API? | DDoS –∑–∞—â–∏—Ç–∞ |
| 5 | –ö–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–ø–ª–∞—Ç–∞? | –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç |

### 11.2 –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å backend

| # | –ú–µ—Å—Ç–æ | –†–∏—Å–∫ |
|---|-------|------|
| 1 | `UsersUsageResponse.users` vs `items` | –†–∞–∑–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –≤ —Ä–∞–∑–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö |
| 2 | –¢–∏–ø—ã –¥–ª—è Project Secrets | –ù–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã |
| 3 | WebSocket events –≤ billing | –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Ç–∏–ø—ã, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è |

### 11.3 –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

| # | –ú–µ—Å—Ç–æ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|-------|----------|
| 1 | apiUrlManager | localStorage override –¥–ª—è dev |
| 2 | Cookie parsing –≤ middleware | JWT –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ |
| 3 | Hardcoded Russian text | –ù–µ—Ç i18n —Å–∏—Å—Ç–µ–º—ã |

### 11.4 –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥

| # | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|---|----------|-----------|
| 1 | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤ | –í—ã—Å–æ–∫–∏–π |
| 2 | –ù–µ—Ç Storybook –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ | –°—Ä–µ–¥–Ω–∏–π |
| 3 | –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ (email/user_email) | –ù–∏–∑–∫–∏–π |

---

## 12. –í–æ–ø—Ä–æ—Å—ã –∫ Backend

### A) Must-have –≤–æ–ø—Ä–æ—Å—ã (–±–ª–æ–∫–µ—Ä—ã)

#### 1. –î–æ–º–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏

| # | –í–æ–ø—Ä–æ—Å | –ó–∞—á–µ–º –Ω—É–∂–µ–Ω | –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç |
|---|--------|-------------|-----------------|
| 1.1 | –ü–æ–ª–Ω–∞—è ERD (Entity Relationship Diagram) | –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Å–≤—è–∑–µ–π | –î–∏–∞–≥—Ä–∞–º–º–∞ |
| 1.2 | –ö–∞–∫–∏–µ –ø–æ–ª—è –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –ø–æ–∏—Å–∫–∞? | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ | –°–ø–∏—Å–æ–∫ –ø–æ–ª–µ–π |
| 1.3 | Soft delete –∏–ª–∏ hard delete –¥–ª—è —Å—É—â–Ω–æ—Å—Ç–µ–π? | –õ–æ–≥–∏–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è | –ü–æ–ª–∏—Ç–∏–∫–∞ |

#### 2. Authentication

| # | –í–æ–ø—Ä–æ—Å | –ó–∞—á–µ–º –Ω—É–∂–µ–Ω | –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç |
|---|--------|-------------|-----------------|
| 2.1 | –ö–∞–∫–æ–π —Å—Ä–æ–∫ –∂–∏–∑–Ω–∏ refresh_token? | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ remember me | –ß–∏—Å–ª–æ (–¥–Ω–∏) |
| 2.2 | –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç email verification flow? | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã | Sequence diagram |
| 2.3 | –ï—Å—Ç—å –ª–∏ password reset endpoint? | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è forgot password | Endpoint spec |
| 2.4 | –ö–∞–∫ logout –∏–∑ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤? | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | API spec |

#### 3. RBAC/Permissions

| # | –í–æ–ø—Ä–æ—Å | –ó–∞—á–µ–º –Ω—É–∂–µ–Ω | –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç |
|---|--------|-------------|-----------------|
| 3.1 | –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ø—Ä–∞–≤–∞ ‚Äî –≤ JWT –∏–ª–∏ –≤ –ë–î? | –õ–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ |
| 3.2 | –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–æ–ª–∏ –Ω—É–∂–µ–Ω re-login? | UX | –î–∞/–ù–µ—Ç |
| 3.3 | –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∞ –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤? | Project ‚Üí Avatar ‚Üí Document | –ü—Ä–∞–≤–∏–ª–∞ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è |

#### 4. Billing

| # | –í–æ–ø—Ä–æ—Å | –ó–∞—á–µ–º –Ω—É–∂–µ–Ω | –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç |
|---|--------|-------------|-----------------|
| 4.1 | –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–µ—Ä–∏–æ–¥ –±–∏–ª–ª–∏–Ω–≥–∞? | –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞—Ç | –õ–æ–≥–∏–∫–∞ |
| 4.2 | –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ downgrade –ø–ª–∞–Ω–∞? | UX | –ü—Ä–∞–≤–∏–ª–∞ |
| 4.3 | –ï—Å—Ç—å –ª–∏ trial period? | –û–Ω–±–æ—Ä–¥–∏–Ω–≥ | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è |
| 4.4 | –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç grace period –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏? | UX | –ü—Ä–∞–≤–∏–ª–∞ |
| 4.5 | –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –ª–∏ Stripe –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è? | –†–æ–∞–¥–º–∞–ø | Timeline |

#### 5. –õ–∏–º–∏—Ç—ã/–ö–≤–æ—Ç—ã

| # | –í–æ–ø—Ä–æ—Å | –ó–∞—á–µ–º –Ω—É–∂–µ–Ω | –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç |
|---|--------|-------------|-----------------|
| 5.1 | –ì–¥–µ —Å—á–∏—Ç–∞—é—Ç—Å—è —Ç–æ–∫–µ–Ω—ã ‚Äî –Ω–∞ —É—Ä–æ–≤–Ω–µ –∑–∞–ø—Ä–æ—Å–∞ –∏–ª–∏ batch? | –¢–æ—á–Ω–æ—Å—Ç—å —É—á—ë—Ç–∞ | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ |
| 5.2 | –ö–∞–∫ —Å—á–∏—Ç–∞—é—Ç—Å—è —Ç–æ–∫–µ–Ω—ã –ø—Ä–∏ –æ—à–∏–±–∫–µ LLM? | –°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å | –ü–æ–ª–∏—Ç–∏–∫–∞ |
| 5.3 | Rate limiting –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/IP? | –ó–∞—â–∏—Ç–∞ –æ—Ç abuse | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è |

#### 6. API –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã

| # | –í–æ–ø—Ä–æ—Å | –ó–∞—á–µ–º –Ω—É–∂–µ–Ω | –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç |
|---|--------|-------------|-----------------|
| 6.1 | –ï—Å—Ç—å –ª–∏ OpenAPI spec (–∞–∫—Ç—É–∞–ª—å–Ω—ã–π)? | –¢–∏–ø–∏–∑–∞—Ü–∏—è —Ñ—Ä–æ–Ω—Ç–∞ | JSON/YAML |
| 6.2 | –§–æ—Ä–º–∞—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ ‚Äî `items` –∏–ª–∏ entity name (`users`)? | –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å | –°—Ç–∞–Ω–¥–∞—Ä—Ç |
| 6.3 | –§–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫ ‚Äî –≤—Å–µ–≥–¥–∞ `{ error: { code, message } }`? | Error handling | –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è |
| 6.4 | –ï—Å—Ç—å –ª–∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API (`/v1/`, `/v2/`)? | Backwards compatibility | –ü–æ–ª–∏—Ç–∏–∫–∞ |

#### 7. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

| # | –í–æ–ø—Ä–æ—Å | –ó–∞—á–µ–º –Ω—É–∂–µ–Ω | –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç |
|---|--------|-------------|-----------------|
| 7.1 | –ö–∞–∫–∏–µ LLM –º–æ–¥–µ–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è? | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è UI | –°–ø–∏—Å–æ–∫ |
| 7.2 | –ö–∞–∫–∏–µ embedding –º–æ–¥–µ–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã? | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è UI | –°–ø–∏—Å–æ–∫ |
| 7.3 | Telegram webhook URL ‚Äî –≥–¥–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è? | –î–µ–ø–ª–æ–π | Env variable |
| 7.4 | –ö–∞–∫ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è S3/storage? | –î–æ–∫—É–º–µ–Ω—Ç—ã | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è |

#### 8. –î–µ–ø–ª–æ–π/–û–∫—Ä—É–∂–µ–Ω–∏—è

| # | –í–æ–ø—Ä–æ—Å | –ó–∞—á–µ–º –Ω—É–∂–µ–Ω | –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç |
|---|--------|-------------|-----------------|
| 8.1 | Production API URL? | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | URL |
| 8.2 | Staging environment –µ—Å—Ç—å? | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | URL |
| 8.3 | CORS –ø–æ–ª–∏—Ç–∏–∫–∞ –Ω–∞ backend? | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è |
| 8.4 | CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏? | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | URL |

### B) Good-to-have –≤–æ–ø—Ä–æ—Å—ã (—É–ª—É—á—à–µ–Ω–∏—è)

#### 1. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| # | –í–æ–ø—Ä–æ—Å | –ó–∞—á–µ–º –Ω—É–∂–µ–Ω |
|---|--------|-------------|
| 1.1 | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ backend (Redis)? | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è |
| 1.2 | –ï—Å—Ç—å –ª–∏ bulk operations (batch upload)? | UX |
| 1.3 | Streaming –¥–ª—è chat responses? | UX |

#### 2. –ê—É–¥–∏—Ç –∏ –∏—Å—Ç–æ—Ä–∏—è

| # | –í–æ–ø—Ä–æ—Å | –ó–∞—á–µ–º –Ω—É–∂–µ–Ω |
|---|--------|-------------|
| 2.1 | Retention period –¥–ª—è audit logs? | Compliance |
| 2.2 | –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—É—â–Ω–æ—Å—Ç–µ–π? | –û—Ç–ª–∞–¥–∫–∞ |
| 2.3 | –ú–æ–∂–Ω–æ –ª–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏? | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ |

#### 3. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

| # | –í–æ–ø—Ä–æ—Å | –ó–∞—á–µ–º –Ω—É–∂–µ–Ω |
|---|--------|-------------|
| 3.1 | CSRF –∑–∞—â–∏—Ç–∞ –Ω—É–∂–Ω–∞? | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å |
| 3.2 | XSS sanitization –Ω–∞ backend? | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å |
| 3.3 | Webhook validation (Telegram)? | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å |
| 3.4 | –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ secrets –≤ –ë–î? | Compliance |

#### 4. GDPR/Privacy

| # | –í–æ–ø—Ä–æ—Å | –ó–∞—á–µ–º –Ω—É–∂–µ–Ω |
|---|--------|-------------|
| 4.1 | –ö–∞–∫ —É–¥–∞–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (GDPR)? | Compliance |
| 4.2 | PII data handling policy? | Legal |
| 4.3 | Data retention periods? | Compliance |

#### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

| # | –í–æ–ø—Ä–æ—Å | –ó–∞—á–µ–º –Ω—É–∂–µ–Ω |
|---|--------|-------------|
| 5.1 | –ï—Å—Ç—å –ª–∏ sandbox/test environment? | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |
| 5.2 | –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ/fixtures –¥–æ—Å—Ç—É–ø–Ω—ã? | Development |
| 5.3 | Contract tests –º–µ–∂–¥—É front/back? | CI/CD |

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: –ß—Ç–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å backend –∫–æ–º–∞–Ω–¥–µ

### –î–ª—è –ø–æ–ª–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –Ω—É–∂–Ω—ã:

1. **OpenAPI Specification** (–∞–∫—Ç—É–∞–ª—å–Ω—ã–π)
   - –í—Å–µ endpoints
   - Request/Response schemas
   - Error codes

2. **ERD (Entity Relationship Diagram)**
   - –í—Å–µ —Å—É—â–Ω–æ—Å—Ç–∏
   - –°–≤—è–∑–∏
   - –ò–Ω–¥–µ–∫—Å—ã

3. **–°–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π –∏ –ø—Ä–∞–≤**
   - –ú–∞—Ç—Ä–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–∞
   - –ü—Ä–∞–≤–∏–ª–∞ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

4. **–¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞**
   - –õ–∏–º–∏—Ç—ã –ø–æ –ø–ª–∞–Ω–∞–º
   - Overage pricing
   - Trial/Grace period

5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**
   - LLM models list
   - Storage configuration
   - Telegram setup guide

6. **Environment Configuration**
   - All env variables
   - Per-environment values

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø—Ä–æ–¥—É–∫—Ç–∞

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –°—Ç–∞—Ç—É—Å |
|-----------|--------|
| **Core Features (Avatar/Documents/Chat)** | ‚úÖ 90% –≥–æ—Ç–æ–≤–æ |
| **Auth/RBAC** | ‚úÖ 85% –≥–æ—Ç–æ–≤–æ |
| **Billing (tracking)** | ‚úÖ 80% –≥–æ—Ç–æ–≤–æ |
| **Billing (payments)** | ‚ùå 0% ‚Äî –Ω–µ—Ç Stripe |
| **Telegram Integration** | ‚úÖ 95% –≥–æ—Ç–æ–≤–æ |
| **Admin Panel** | ‚úÖ 85% –≥–æ—Ç–æ–≤–æ |
| **End Users (B2C)** | ‚úÖ 80% –≥–æ—Ç–æ–≤–æ |

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º

1. **–ö—Ä–∏—Ç–∏—á–Ω–æ:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–µ–π (Stripe)
2. **–í—ã—Å–æ–∫–∏–π:** Email verification flow
3. **–°—Ä–µ–¥–Ω–∏–π:** Forgot password
4. **–°—Ä–µ–¥–Ω–∏–π:** Streaming chat
5. **–ù–∏–∑–∫–∏–π:** i18n —Å–∏—Å—Ç–µ–º–∞

---

*–î–æ–∫—É–º–µ–Ω—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã frontend-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è. –í—Å–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ [–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–æ–¥–æ–º], [–í–µ—Ä–æ—è—Ç–Ω–æ] –∏–ª–∏ [–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ].*

